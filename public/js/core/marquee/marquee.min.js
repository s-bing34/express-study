define(function(require,exports,module){"use strict";var e={auto:!0,speed:500,pause:600,showCrumb:!1,crumb:".js-marquee-crumb",showBtn:!1,prev:".js-marquee-prev",next:".js-marquee-next",num:1,change:!1,width:0,hegiht:0,sliderType:"left",callback:null};module.exports=function(n,t){var i,o,a,s,u,l,c,r,f=$(n),d=f.find("ul"),p=d.find("li").length,m=0,h={};t=$.extend(e,t),l=t.width,c=t.height,h={ready:!0,init:function(){this.elementInit(),this.positionInit(),t.auto&&this.setAutoPlay(),this.bind()},elementInit:function(){for(var e=[],n=[],o=0;o<t.num;o++)e.push(d.find("li").eq(o));for(o=p;o>p-t.num;o--)n.push(d.find("li").eq(o-1));for(o=0;o<t.num;o++)d.append(e[o].clone()),d.prepend(n[o].clone());s=d.find("li").length,"left"==t.sliderType&&d.width(s*l),t.showCrumb&&(i=$(t.crumb))},positionInit:function(){switch(r="left"==t.sliderType?-l*t.num-l*m:-c*t.num-c*m,t.sliderType){case"up":d.css("top",r);break;default:d.css("left",r)}},setAutoPlay:function(){clearInterval(u),t.auto&&(u=setInterval(function(){m+=1,h.showPics(m)},t.pause),window.onblur=function(){clearInterval(u)},window.onfocus=function(){clearInterval(u),h.setAutoPlay()})},showPics:function(e){switch(this.ready=!1,t.sliderType){case"up":var n=-c*t.num-e*c;d.stop(!0,!1).animate({top:n},t.speed,function(){e==p?(m=0,h.positionInit()):e==-t.num&&(m=p-1,h.positionInit()),h.ready=!0,t.callback&&t.callback(m)});break;default:var o=-l*t.num-e*l;d.stop(!0,!1).animate({left:o},t.speed,function(){e==p?(m=0,h.positionInit()):e==-t.num&&(m=p-1,h.positionInit()),h.ready=!0,t.callback&&t.callback(m)})}t.showCrumb&&$("span",i).removeClass("current").eq(e).addClass("current")},bind:function(){t.showBtn&&(o=$(t.prev),a=$(t.next),o.on("click",function(){h.ready&&(m-=1,h.showPics(m))}),a.on("click",function(){h.ready&&(m+=1,h.showPics(m))}),o.on("mouseover",function(){clearInterval(u)}),a.on("mouseover",function(){clearInterval(u)}),o.on("mouseleave",function(){clearInterval(u),h.setAutoPlay()}),a.on("mouseleave",function(){clearInterval(u),h.setAutoPlay()})),f.on("mouseover",function(){clearInterval(u)}),f.on("mouseleave",function(){clearInterval(u),h.setAutoPlay()})}},h.init()}});