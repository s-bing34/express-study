define(function(require,exports,module){"use strict";var t={current:1,total:1,size:10,count:0,label:4,showfirst:!0,showprev:!0,shownext:!0,showlast:!0,showjump:!1,showselect:!1,callback:null,word:{first:"首页",prev:"上一页",next:"下一页",last:"尾页",jump:"跳转至"}};module.exports=function(n,l){var e=$(n),a=$("<ul></ul>"),i=$.extend({},t,l),c=$.extend({},t.word,l.word),s={};s={setPoint:function(){var t=i.current-i.label,n=i.current+i.label;return 1>=t?(this.startPoint=1,n=n-t+1,this.endPoint=n>i.total?i.total:n):n<i.total?(this.endPoint=n,this.startPoint=t):(this.endPoint=i.total,t=i.total-2*i.label,this.startPoint=t>0?t:1),i.current<1||i.current>i.total?void this.init(1):void 0},init:function(){this.setPoint(),this.initDom(),this.bind()},initDom:function(){for(var t=this.startPoint;t<=this.endPoint;t++)a.append(t==i.current?'<li class="page current">'+t+"</li>":'<li class="page">'+t+"</li>");if(i.showprev&&(a.prepend('<li class="prev k">'+c.prev+"</li>"),i.current<=1&&$(".prev",a).addClass("unclick")),i.showfirst&&(a.prepend('<li class="first k">'+c.first+"</li>"),i.current<=1&&$(".first",a).addClass("unclick")),i.showprev&&(a.append('<li class="next k">'+c.next+"</li>"),i.current>=i.total&&$(".next",a).addClass("unclick")),i.showfirst&&(a.append('<li class="last k">'+c.last+"</li>"),i.current>=i.total&&$(".last",a).addClass("unclick")),i.showjump&&a.append('<li class="jump"><label><span>'+c.jump+'</span><input type="text" class="pagenum" /></label></li>'),i.showselect){var n=[];for(t=1;t<=i.total;t++)n.push(t==i.current?'<option value="'+t+'" selected>'+t+"</option>":'<option value="'+t+'">'+t+"</option>");a.append('<li class="select"><select>'+n.join("")+"</select></li>")}e.html(a)},bind:function(){e.on("keyup",".pagenum",function(t){var n=$(this).val(),l=/\D+/g;n&&(n=n.replace(l,""),n>i.total&&(n=i.total),1>n&&(n=1),$(this).val(n),13==t.keyCode&&s.callback(n))}),e.on("click",".page",function(){var t=$(this).text();s.callback(t)}),e.on("click",".first",function(){i.current<=1||s.callback(1)}),e.on("click",".prev",function(){if(!(i.current<=1)){var t=i.current-1;t=t>0?t:1,s.callback(t)}}),e.on("click",".next",function(){if(!(i.current>=i.total)){var t=i.current+1;s.callback(t)}}),e.on("click",".last",function(){i.current>=i.total||s.callback(i.total)}),e.on("change",".select select",function(){var t=$(this).val();t!=i.current&&s.callback(t)})},callback:function(t){t&&"function"==typeof i.callback&&(i.current="number"!=typeof t?parseInt(t):t,i.callback(i))}},s.init()}});